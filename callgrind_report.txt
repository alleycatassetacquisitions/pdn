--------------------------------------------------------------------------------
Profile data file 'callgrind.out' (creator: callgrind-3.18.1)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 34311432
Trigger: Program termination
Profiled target:  .pio/build/native_perf/program 50000 (PID 120523, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                   
--------------------------------------------------------------------------------
160,562,845 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                   file:function
--------------------------------------------------------------------------------
26,000,081 (16.19%)  ./string/../sysdeps/x86_64/multiarch/strcpy-avx2.S:__strncpy_avx2 [/usr/lib/x86_64-linux-gnu/libc.so.6]
17,350,388 (10.81%)  ./stdio-common/./stdio-common/vfprintf-internal.c:__vfprintf_internal [/usr/lib/x86_64-linux-gnu/libc.so.6]
14,340,586 ( 8.93%)  ./libio/./libio/genops.c:_IO_default_xsputn [/usr/lib/x86_64-linux-gnu/libc.so.6]
 6,481,277 ( 4.04%)  ./malloc/./malloc/malloc.c:_int_free [/usr/lib/x86_64-linux-gnu/libc.so.6]
 5,450,000 ( 3.39%)  src/game/match-manager.cpp:MatchManager::initialize(Player*, StorageInterface*, PeerCommsInterface*, QuickdrawWirelessManager*)::{lambda(void*)#1}::_FUN(void*) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 4,821,190 ( 3.00%)  src/perf-main.cpp:main [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 4,600,005 ( 2.86%)  /usr/include/c++/11/bits/char_traits.h:main
 4,341,359 ( 2.70%)  ./malloc/./malloc/malloc.c:malloc [/usr/lib/x86_64-linux-gnu/libc.so.6]
 3,944,842 ( 2.46%)  ./stdio-common/./stdio-common/_itoa.c:_itoa_word [/usr/lib/x86_64-linux-gnu/libc.so.6]
 3,700,000 ( 2.30%)  src/game/match-manager.cpp:MatchManager::clearCurrentMatch() [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 3,300,000 ( 2.06%)  src/match.cpp:Match::Match(char const*, char const*, char const*) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 3,100,000 ( 1.93%)  src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::broadcastPacket(unsigned char const*, int, Match const&) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 3,000,000 ( 1.87%)  src/game/match-manager.cpp:MatchManager::didWin() [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 2,850,000 ( 1.78%)  ./libio/./libio/vsnprintf.c:__vsnprintf_internal [/usr/lib/x86_64-linux-gnu/libc.so.6]
 2,800,000 ( 1.74%)  src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::processQuickdrawCommand(unsigned char const*, unsigned char const*, unsigned long) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 2,700,000 ( 1.68%)  ./libio/./libio/iopadn.c:_IO_padn [/usr/lib/x86_64-linux-gnu/libc.so.6]
 2,650,000 ( 1.65%)  src/game/match-manager.cpp:MatchManager::listenForMatchResults(QuickdrawCommand const&) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 2,400,096 ( 1.49%)  ./libio/./libio/strops.c:_IO_str_init_static_internal [/usr/lib/x86_64-linux-gnu/libc.so.6]
 2,300,008 ( 1.43%)  /usr/include/c++/11/bits/basic_string.h:main
 2,221,054 ( 1.38%)  ./malloc/./malloc/malloc.c:free [/usr/lib/x86_64-linux-gnu/libc.so.6]
 2,207,560 ( 1.37%)  ./string/../sysdeps/x86_64/multiarch/strlen-avx2.S:__strlen_avx2 [/usr/lib/x86_64-linux-gnu/libc.so.6]
 1,900,408 ( 1.18%)  ./string/../sysdeps/x86_64/multiarch/strchr-avx2.S:__strchrnul_avx2 [/usr/lib/x86_64-linux-gnu/libc.so.6]
 1,800,000 ( 1.12%)  ./stdio-common/./stdio-common/printf-parse.h:__vfprintf_internal
 1,800,000 ( 1.12%)  src/player.cpp:Player::isHunter() const [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 1,550,000 ( 0.97%)  ./debug/./debug/snprintf_chk.c:__snprintf_chk [/usr/lib/x86_64-linux-gnu/libc.so.6]
 1,500,000 ( 0.93%)  include/device/wireless-manager.hpp:QuickdrawWirelessManager::broadcastPacket(unsigned char const*, int, Match const&)
 1,500,000 ( 0.93%)  src/game/match-manager.cpp:MatchManager::createMatch(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 1,300,000 ( 0.81%)  src/match.cpp:Match::Match(char const*, char const*, char const*, unsigned long, unsigned long) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
 1,211,268 ( 0.75%)  ???:operator new(unsigned long) [/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30]
 1,200,068 ( 0.75%)  ???:std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_create(unsigned long&, unsigned long) [/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30]
 1,200,048 ( 0.75%)  ./libio/./libio/genops.c:_IO_setb [/usr/lib/x86_64-linux-gnu/libc.so.6]
 1,200,004 ( 0.75%)  ???:0x000000000010f440 [???]
 1,200,003 ( 0.75%)  /usr/include/x86_64-linux-gnu/bits/string_fortified.h:main
 1,150,046 ( 0.72%)  ./libio/./libio/genops.c:_IO_no_init [/usr/lib/x86_64-linux-gnu/libc.so.6]
 1,150,046 ( 0.72%)  ./libio/./libio/genops.c:_IO_old_init [/usr/lib/x86_64-linux-gnu/libc.so.6]
 1,000,000 ( 0.62%)  /usr/include/x86_64-linux-gnu/bits/string_fortified.h:Match::Match(char const*, char const*, char const*)
 1,000,000 ( 0.62%)  /usr/include/x86_64-linux-gnu/bits/string_fortified.h:Match::Match(char const*, char const*, char const*, unsigned long, unsigned long)
 1,000,000 ( 0.62%)  include/wireless/quickdraw-wireless-manager.hpp:QuickdrawWirelessManager::processQuickdrawCommand(unsigned char const*, unsigned char const*, unsigned long)
   995,258 ( 0.62%)  ./elf/./elf/dl-lookup.c:_dl_lookup_symbol_x [/usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2]
   950,000 ( 0.59%)  ./stdio-common/../libio/libioP.h:__vfprintf_internal
   900,002 ( 0.56%)  /usr/include/c++/11/bits/basic_string.tcc:main
   800,000 ( 0.50%)  ./libio/./libio/libioP.h:_IO_padn
   800,000 ( 0.50%)  /usr/include/x86_64-linux-gnu/bits/string_fortified.h:QuickdrawWirelessManager::broadcastPacket(unsigned char const*, int, Match const&)
   600,072 ( 0.37%)  ./libio/./libio/libioP.h:_IO_default_xsputn
   600,000 ( 0.37%)  /usr/include/c++/11/bits/invoke.h:std::_Function_handler<void (QuickdrawCommand const&), std::_Bind<void (MatchManager::*(MatchManager*, std::_Placeholder<1>))(QuickdrawCommand const&)> >::_M_invoke(std::_Any_data const&, QuickdrawCommand const&)
   600,000 ( 0.37%)  src/player.cpp:Player::getOpponentMacBytes() const [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   600,000 ( 0.37%)  src/player.cpp:Player::hasOpponentMac() const [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   577,336 ( 0.36%)  ./elf/./elf/dl-lookup.c:do_lookup_x [/usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2]
   500,000 ( 0.31%)  /usr/include/c++/11/bits/std_function.h:QuickdrawWirelessManager::processQuickdrawCommand(unsigned char const*, unsigned char const*, unsigned long)
   500,000 ( 0.31%)  include/game/match-manager.hpp:MatchManager::initialize(Player*, StorageInterface*, PeerCommsInterface*, QuickdrawWirelessManager*)::{lambda(void*)#1}::_FUN(void*)
   500,000 ( 0.31%)  src/match.cpp:Match::Match(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   400,050 ( 0.25%)  /usr/include/x86_64-linux-gnu/bits/stdio2.h:main
   400,000 ( 0.25%)  /usr/include/c++/11/optional:MatchManager::clearCurrentMatch()
   400,000 ( 0.25%)  /usr/include/x86_64-linux-gnu/bits/string_fortified.h:QuickdrawWirelessManager::processQuickdrawCommand(unsigned char const*, unsigned char const*, unsigned long)
   302,871 ( 0.19%)  ./malloc/./malloc/arena.c:free
   300,000 ( 0.19%)  src/game/match-manager.cpp:MatchManager::getDuelButtonPush() [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   300,000 ( 0.19%)  src/game/match-manager.cpp:MatchManager::setDuelLocalStartTime(unsigned long) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   300,000 ( 0.19%)  src/match.cpp:Match::setBountyDrawTime(unsigned long) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   300,000 ( 0.19%)  src/match.cpp:Match::setHunterDrawTime(unsigned long) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   300,000 ( 0.19%)  src/perf-main.cpp:StepClock::milliseconds() [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   300,000 ( 0.19%)  src/perf-main.cpp:StubPeerComms::getPeerCommsState() [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   300,000 ( 0.19%)  src/perf-main.cpp:StubPeerComms::sendData(unsigned char const*, PktType, unsigned char const*, unsigned long) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   276,183 ( 0.17%)  ./elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
   250,000 ( 0.16%)  include/game/match-manager.hpp:main
   201,885 ( 0.13%)  ???:0x00000000048ea0d0 [???]
   201,883 ( 0.13%)  ???:0x00000000048ea2e0 [???]
   201,883 ( 0.13%)  ???:0x00000000048eab30 [???]
   201,878 ( 0.13%)  ???:operator delete(void*) [/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30]
   201,876 ( 0.13%)  ???:0x000000000010f540 [???]
   201,876 ( 0.13%)  ???:operator delete(void*, unsigned long) [/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30]
   200,932 ( 0.13%)  ???:0x000000000010f420 [???]
   200,042 ( 0.12%)  ???:0x0000000004abf4d0 [???]
   200,015 ( 0.12%)  ???:0x00000000048e9ba0 [???]
   200,006 ( 0.12%)  ???:0x000000000010f6d0 [???]
   200,000 ( 0.12%)  /usr/include/c++/11/bits/std_function.h:std::_Function_handler<void (QuickdrawCommand const&), std::_Bind<void (MatchManager::*(MatchManager*, std::_Placeholder<1>))(QuickdrawCommand const&)> >::_M_invoke(std::_Any_data const&, QuickdrawCommand const&) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   200,000 ( 0.12%)  /usr/include/c++/11/bits/stl_construct.h:MatchManager::createMatch(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)
   200,000 ( 0.12%)  src/perf-main.cpp:StubPeerComms::removePeer(unsigned char*) [/mnt/c/Users/Elli Furedy/projects/pdn/.pio/build/native_perf/program]
   135,003 ( 0.08%)  ./malloc/./malloc/malloc.c:_int_malloc [/usr/lib/x86_64-linux-gnu/libc.so.6]

--------------------------------------------------------------------------------
-- Auto-annotated source: include/wireless/quickdraw-wireless-manager.hpp
--------------------------------------------------------------------------------
Ir               

-- line 54 ----------------------------------------
      .                   }
      .               }
      .           
      .               /**
      .                * Hot-path constructor. Constructs Match in-place from raw packet fields,
      .                * avoiding an intermediate Match object and the resulting copy.
      .                * Preconditions mirror Match's 5-arg constructor (full-length IDs required).
      .                */
100,000 ( 0.06%)      QuickdrawCommand(const uint8_t* macAddress, int cmd,
      .                                const char* matchId, const char* hunterId, const char* bountyId,
      .                                unsigned long hunterTime, unsigned long bountyTime)
300,000 ( 0.19%)          : wifiMacAddrValid(macAddress != nullptr), command(cmd),
400,000 ( 0.25%)            match(matchId, hunterId, bountyId, hunterTime, bountyTime) {
2,300,000 ( 1.43%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/match.cpp:Match::Match(char const*, char const*, char const*, unsigned long, unsigned long) (100,000x)
200,000 ( 0.12%)          if (macAddress) {
      .                       memcpy(wifiMacAddr, macAddress, 6);
      .                   } else {
      .                       memset(wifiMacAddr, 0, 6);
      .                   }
      .               }
      .           };
      .           
      .           using QDCommandTracker = std::map<int, QuickdrawCommand>;
-- line 75 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/x86_64-linux-gnu/bits/string_fortified.h
--------------------------------------------------------------------------------
Ir                 

-- line 21 ----------------------------------------
        .           #ifndef _STRING_H
        .           # error "Never use <bits/string_fortified.h> directly; include <string.h> instead."
        .           #endif
        .           
        .           __fortify_function void *
        .           __NTH (memcpy (void *__restrict __dest, const void *__restrict __src,
        .           	       size_t __len))
        .           {
2,200,000 ( 1.37%)    return __builtin___memcpy_chk (__dest, __src, __len,
        .           				 __glibc_objsize0 (__dest));
        .           }
        .           
        .           __fortify_function void *
        .           __NTH (memmove (void *__dest, const void *__src, size_t __len))
        .           {
        .             return __builtin___memmove_chk (__dest, __src, __len,
        .           				  __glibc_objsize0 (__dest));
-- line 37 ----------------------------------------
-- line 87 ----------------------------------------
        .           }
        .           #endif
        .           
        .           
        .           __fortify_function char *
        .           __NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
        .           		size_t __len))
        .           {
2,200,011 ( 1.37%)    return __builtin___strncpy_chk (__dest, __src, __len,
14,000,000 ( 8.72%)  => ???:0x000000000010f440 (300,000x)
        .           				  __glibc_objsize (__dest));
        .           }
        .           
        .           #ifdef __USE_XOPEN2K8
        .           # if __GNUC_PREREQ (4, 7) || __glibc_clang_prereq (2, 6)
        .           __fortify_function char *
        .           __NTH (stpncpy (char *__dest, const char *__src, size_t __n))
        .           {
-- line 103 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: src/game/match-manager.cpp
--------------------------------------------------------------------------------
Ir                 

        .           #include "game/match-manager.hpp"
        .           #include <ArduinoJson.h>
        .           #include "device/drivers/logger.hpp"
        .           #include "wireless/quickdraw-wireless-manager.hpp"
        .           #include "device/device-constants.hpp"
        .           
        .           static const char* const MATCH_MANAGER_TAG = "MATCH_MANAGER";
        .           
        2 ( 0.00%)  MatchManager::MatchManager() 
        2 ( 0.00%)      : player(nullptr)
        2 ( 0.00%)      , storage(nullptr)
        2 ( 0.00%)      , peerComms(nullptr)
        2 ( 0.00%)      , quickdrawWirelessManager(nullptr) {
        2 ( 0.00%)  }
        .           
        6 ( 0.00%)  MatchManager::~MatchManager() { 
        2 ( 0.00%)      quickdrawWirelessManager = nullptr;
        6 ( 0.00%)      if (storage) {
        4 ( 0.00%)          storage->end();
        4 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/perf-main.cpp:StubStorage::end() (2x)
        .               }
        4 ( 0.00%)  }
        .           
  800,000 ( 0.50%)  void MatchManager::clearCurrentMatch() {
  200,000 ( 0.12%)      if (activeDuelState.match) {
  800,000 ( 0.50%)          if (peerComms && player && player->hasOpponentMac()) {
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::hasOpponentMac() const (100,000x)
  800,000 ( 0.50%)              peerComms->removePeer(const_cast<uint8_t*>(player->getOpponentMacBytes()));
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::getOpponentMacBytes() const (100,000x)
  200,000 ( 0.12%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/perf-main.cpp:StubPeerComms::removePeer(unsigned char*) (100,000x)
  100,000 ( 0.06%)              LOG_I(MATCH_MANAGER_TAG, "Removed opponent peer from ESP-NOW");
        .                   }
        .           
        .                   LOG_I(MATCH_MANAGER_TAG, "Clearing current match");
        .                   activeDuelState.match.reset();
  200,000 ( 0.12%)          activeDuelState.hasReceivedDrawResult = false;
        .                   activeDuelState.hasPressedButton = false;
  100,000 ( 0.06%)          activeDuelState.duelLocalStartTime = 0;
  100,000 ( 0.06%)          activeDuelState.gracePeriodExpiredNoResult = false;
        .               }
  600,000 ( 0.37%)  }
        .           
  600,000 ( 0.37%)  Match* MatchManager::createMatch(const std::string& match_id, const std::string& hunter_id, const std::string& bounty_id) {
        .               // Only allow one active match at a time
  200,000 ( 0.12%)      if (activeDuelState.match.has_value()) {
        .                   return nullptr;
        .               }
        .           
  200,000 ( 0.12%)      activeDuelState.match.emplace(match_id, hunter_id, bounty_id);
        .               return &*activeDuelState.match;
  500,000 ( 0.31%)  }
        .           
        .           Match* MatchManager::receiveMatch(const Match& match) {
        .               // Only allow one active match at a time
        .               if (activeDuelState.match.has_value()) {
        .                   return nullptr;
        .               }
        .           
        .               activeDuelState.match = match;
        .               return &*activeDuelState.match;
        .           }
        .           
  100,000 ( 0.06%)  void MatchManager::setDuelLocalStartTime(unsigned long local_start_time_ms) {
  100,000 ( 0.06%)      activeDuelState.duelLocalStartTime = local_start_time_ms;
  100,000 ( 0.06%)  }
        .           
        .           unsigned long MatchManager::getDuelLocalStartTime() {
        .               return activeDuelState.duelLocalStartTime;
        .           }
        .           
        .           // //Pretty sure this needs to be refactored. will come back to it.
        .           bool MatchManager::matchResultsAreIn() {
        .               if (!activeDuelState.match) {
-- line 69 ----------------------------------------
-- line 73 ----------------------------------------
        .               return (activeDuelState.hasReceivedDrawResult && activeDuelState.hasPressedButton)
        .               || (activeDuelState.gracePeriodExpiredNoResult && activeDuelState.hasPressedButton);
        .           }
        .           
        .           void MatchManager::setNeverPressed() {
        .               activeDuelState.gracePeriodExpiredNoResult = true;
        .           }
        .           
  500,000 ( 0.31%)  bool MatchManager::didWin() {
  200,000 ( 0.12%)      if (!activeDuelState.match) {
        .                   return false;
        .               }
        .           
  500,000 ( 0.31%)      if(player->isHunter() && activeDuelState.match->getBountyDrawTime() == 0) {
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::isHunter() const (100,000x)
        .                   return true;
        .               }
        .           
  500,000 ( 0.31%)      if(!player->isHunter() && activeDuelState.match->getHunterDrawTime() == 0) {
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::isHunter() const (100,000x)
        .                   return true;
        .               }
        .           
        .               
  700,000 ( 0.44%)      return player->isHunter() ? 
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::isHunter() const (100,000x)
        .               activeDuelState.match->getHunterDrawTime() < activeDuelState.match->getBountyDrawTime() :
        .               activeDuelState.match->getBountyDrawTime() < activeDuelState.match->getHunterDrawTime();
  600,000 ( 0.37%)  }
        .           
        .           bool MatchManager::finalizeMatch() {
        .               if (!activeDuelState.match) {
        .                   LOG_E(MATCH_MANAGER_TAG, "Cannot finalize match - no active match or ID mismatch\n");
        .                   return false;
        .               }
        .           
        .               std::string match_id = activeDuelState.match->getMatchId();
-- line 106 ----------------------------------------
-- line 122 ----------------------------------------
        .               return activeDuelState.hasReceivedDrawResult;
        .           }
        .           
        .           bool MatchManager::getHasPressedButton() {
        .               return activeDuelState.hasPressedButton;
        .           }
        .           
        .           void MatchManager::setReceivedDrawResult() {
  100,000 ( 0.06%)      activeDuelState.hasReceivedDrawResult = true;
        .           }
        .           
  100,000 ( 0.06%)  parameterizedCallbackFunction MatchManager::getDuelButtonPush() {
  100,000 ( 0.06%)      return duelButtonPush;
  100,000 ( 0.06%)  }
        .           
        .           void MatchManager::setReceivedButtonPush() {
  100,000 ( 0.06%)      activeDuelState.hasPressedButton = true;
        .           }
        .           
        .           bool MatchManager::setHunterDrawTime(unsigned long hunter_time_ms) {
  200,000 ( 0.12%)      if (!activeDuelState.match) {
        .                   return false;
        .               }
  250,000 ( 0.16%)      activeDuelState.match->setHunterDrawTime(hunter_time_ms);
  150,000 ( 0.09%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/match.cpp:Match::setHunterDrawTime(unsigned long) (50,000x)
   50,000 ( 0.03%)      return true;
        .           }
        .           
        .           bool MatchManager::setBountyDrawTime(unsigned long bounty_time_ms) {
  200,000 ( 0.12%)      if (!activeDuelState.match) {
        .                   return false;
        .               }
  250,000 ( 0.16%)      activeDuelState.match->setBountyDrawTime(bounty_time_ms);
  150,000 ( 0.09%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/match.cpp:Match::setBountyDrawTime(unsigned long) (50,000x)
   50,000 ( 0.03%)      return true;
        .           }
        .           
        .           std::string MatchManager::toJson() {
        .               // Create JSON document with an object at the root
        .               JsonDocument doc;  // Adjust size based on max matches
        .               
        .               // Create a "matches" array within the root object
        .               JsonArray matchArray = doc["matches"].to<JsonArray>();
-- line 162 ----------------------------------------
-- line 259 ----------------------------------------
        .               match->fromJson(matchJson);
        .               return match;
        .           }
        .           
        .           parameterizedCallbackFunction MatchManager::getButtonMasher() {
        .               return buttonMasher;
        .           }
        .           
        2 ( 0.00%)  void MatchManager::initialize(Player* player, StorageInterface* storage, PeerCommsInterface* peerComms, QuickdrawWirelessManager* quickdrawWirelessManager) {
        2 ( 0.00%)      this->player = player;
        2 ( 0.00%)      this->storage = storage;
        2 ( 0.00%)      this->peerComms = peerComms;
        2 ( 0.00%)      this->quickdrawWirelessManager = quickdrawWirelessManager;
        .           
1,000,004 ( 0.62%)      duelButtonPush = [](void *ctx) {
  200,000 ( 0.12%)          if (!ctx) {
        .                       LOG_E(MATCH_MANAGER_TAG, "Button press handler received null context");
        .                       return;
        .                   }
        .           
        .                   auto* clock = SimpleTimer::getPlatformClock();
  200,000 ( 0.12%)          if (!clock) {
        .                       LOG_E(MATCH_MANAGER_TAG, "Button press handler called with no platform clock");
        .                       return;
        .                   }
  200,000 ( 0.12%)          unsigned long now = clock->milliseconds();
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/perf-main.cpp:StepClock::milliseconds() (100,000x)
        .           
        .                   MatchManager* matchManager = static_cast<MatchManager*>(ctx);
        .                   ActiveDuelState* activeDuelState = &matchManager->activeDuelState;
  100,000 ( 0.06%)          Player *player = matchManager->player;
  100,000 ( 0.06%)          QuickdrawWirelessManager* quickdrawWirelessManager = matchManager->quickdrawWirelessManager;
        .           
  200,000 ( 0.12%)          if(matchManager->getHasPressedButton()) {
        .                       LOG_I(MATCH_MANAGER_TAG, "Button already pressed - skipping");
        .                       return;
        .                   }
        .           
        .                   if(matchManager->getCurrentMatch() == nullptr) {
        .                       LOG_E(MATCH_MANAGER_TAG, "No current match - skipping");
        .                       return;
        .                   }
        .           
  200,000 ( 0.12%)          unsigned long reactionTimeMs = now - matchManager->getDuelLocalStartTime();
        .           
  300,000 ( 0.19%)          if(activeDuelState->buttonMasherCount > 0) {
        .                       reactionTimeMs = reactionTimeMs + (activeDuelState->BUTTON_MASHER_PENALTY_MS * activeDuelState->buttonMasherCount);
        .                   }
        .           
        .                   LOG_I(MATCH_MANAGER_TAG, "Button pressed! Reaction time: %lu ms for %s", 
        .                           reactionTimeMs, player->isHunter() ? "Hunter" : "Bounty");
        .           
  400,000 ( 0.25%)          player->isHunter() ? 
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::isHunter() const (100,000x)
        .                   matchManager->setHunterDrawTime(reactionTimeMs) 
        .                   : matchManager->setBountyDrawTime(reactionTimeMs);
        .           
        .                   LOG_I(MATCH_MANAGER_TAG, "Stored reaction time in MatchManager");
        .           
        .                   // Send a packet with the reaction time
  400,000 ( 0.25%)          if (!player->hasOpponentMac()) {
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::hasOpponentMac() const (100,000x)
        .                       LOG_E(MATCH_MANAGER_TAG, "Cannot send packet - opponent MAC address is empty");
        .                       return;
        .                   }
        .           
        .                   LOG_I(MATCH_MANAGER_TAG, "Broadcasting DRAW_RESULT to opponent MAC: %s",
        .                           player->getOpponentMacAddress().c_str());
        .           
  700,000 ( 0.44%)          quickdrawWirelessManager->broadcastPacket(
6,000,000 ( 3.74%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::broadcastPacket(unsigned char const*, int, Match const&) (100,000x)
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::getOpponentMacBytes() const (100,000x)
        .                       player->getOpponentMacBytes(),
        .                       QDCommand::DRAW_RESULT,
        .                       *matchManager->getCurrentMatch()
        .                   );
        .           
        .                   matchManager->setReceivedButtonPush();
        .                   
        .                   LOG_I(MATCH_MANAGER_TAG, "Reaction time: %lu ms", reactionTimeMs);
  800,000 ( 0.50%)      };
        .           
        4 ( 0.00%)      buttonMasher = [](void *ctx) {
        .                   MatchManager* matchManager = static_cast<MatchManager*>(ctx);
        .                   matchManager->activeDuelState.buttonMasherCount++;
        .                   LOG_I(MATCH_MANAGER_TAG, "Button masher count: %d", matchManager->activeDuelState.buttonMasherCount);
        .               };
        2 ( 0.00%)  }
        .           
  700,000 ( 0.44%)  void MatchManager::listenForMatchResults(const QuickdrawCommand& command) {
        .               LOG_I(MATCH_MANAGER_TAG, "Received command: %d", command.command);
        .               
  400,000 ( 0.25%)      if(command.command == QDCommand::DRAW_RESULT || command.command == QDCommand::NEVER_PRESSED) {
        .                   LOG_I(MATCH_MANAGER_TAG, "Received DRAW_RESULT command from opponent");
        .                   
  200,000 ( 0.12%)          long opponentTime = player->isHunter() ? 
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::isHunter() const (100,000x)
        .                       command.match.getBountyDrawTime() : 
        .                       command.match.getHunterDrawTime();
        .                       
        .                   LOG_I(MATCH_MANAGER_TAG, "Opponent reaction time: %ld ms", opponentTime);
        .                   
  400,000 ( 0.25%)          player->isHunter() ? 
  300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::isHunter() const (100,000x)
        .                   setBountyDrawTime(command.match.getBountyDrawTime()) 
        .                   : setHunterDrawTime(command.match.getHunterDrawTime());
        .           
        .                   setReceivedDrawResult();
        .               } else {
        .                   LOG_W(MATCH_MANAGER_TAG, "Received unexpected command in Match Manager: %d", command.command);
        .               }
  400,012 ( 0.25%)  }

--------------------------------------------------------------------------------
-- Auto-annotated source: src/perf-main.cpp
--------------------------------------------------------------------------------
Ir               

-- line 47 ----------------------------------------
      .           };
      .           
      .           // ============================================================
      .           // Controllable fake clock — no syscall overhead
      .           // ============================================================
      .           
      .           class StepClock : public PlatformClock {
      .           public:
300,000 ( 0.19%)      unsigned long milliseconds() override { return time_ms; }
 50,000 ( 0.03%)      void set(unsigned long t) { time_ms = t; }
      .               void advance(unsigned long delta) { time_ms += delta; }
      .               unsigned long time_ms = 0;
      .           };
      .           
      .           // ============================================================
      .           // Minimal no-op stubs for peripheral interfaces
      .           // ============================================================
      .           
     10 ( 0.00%)  class StubPeerComms : public PeerCommsInterface {
      .           public:
100,000 ( 0.06%)      int sendData(const uint8_t*, PktType,
200,000 ( 0.12%)                   const uint8_t*, const size_t) override { return 1; }
      .               void setPacketHandler(PktType, PacketCallback, void*) override {}
      .               void clearPacketHandler(PktType) override {}
      .               const uint8_t* getGlobalBroadcastAddress() override { return broadcast_; }
      .               uint8_t* getMacAddress() override { return mac_; }
200,000 ( 0.12%)      void removePeer(uint8_t*) override {}
      .               void setPeerCommsState(PeerCommsState) override {}
100,000 ( 0.06%)      PeerCommsState getPeerCommsState() override {
      .                   return PeerCommsState::CONNECTED;
200,000 ( 0.12%)      }
      .               void connect() override {}
      .               void disconnect() override {}
      .           private:
      .               uint8_t mac_[6] = {0};
      .               uint8_t broadcast_[6] = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};
      .           };
      .           
      4 ( 0.00%)  class StubStorage : public StorageInterface {
      .           public:
      .               size_t write(const std::string&, const std::string&) override { return 0; }
      .               std::string read(const std::string&,
      .                                const std::string& def) override { return def; }
      .               bool remove(const std::string&) override { return true; }
      .               bool clear() override { return true; }
      4 ( 0.00%)      void end() override {}
      .               uint8_t readUChar(const std::string&, uint8_t def) override { return def; }
      .               size_t writeUChar(const std::string&, uint8_t) override { return 0; }
      .           };
      .           
     10 ( 0.00%)  class StubHttpClient : public HttpClientInterface {
      .           public:
      .               void setWifiConfig(WifiConfig*) override {}
      .               bool isConnected() override { return false; }
      .               bool queueRequest(HttpRequest&) override { return false; }
      .               void disconnect() override {}
      .               void updateConfig(WifiConfig*) override {}
      .               void retryConnection() override {}
      .               uint8_t* getMacAddress() override { return mac_; }
-- line 105 ----------------------------------------
-- line 122 ----------------------------------------
      .               char bountyId[5];
      .               long hunterDrawTime;
      .               long bountyDrawTime;
      .               int  command;
      .           } __attribute__((packed));
      .           
      .           static PerfPacket makePacket(const Match* m, int command) {
      .               PerfPacket p;
100,000 ( 0.06%)      strncpy(p.matchId,  m->getMatchId(),  36); p.matchId[36]  = '\0';
100,000 ( 0.06%)      strncpy(p.hunterId, m->getHunterId(), 4);  p.hunterId[4]  = '\0';
100,000 ( 0.06%)      strncpy(p.bountyId, m->getBountyId(), 4);  p.bountyId[4]  = '\0';
200,000 ( 0.12%)      p.hunterDrawTime = m->getHunterDrawTime();
200,000 ( 0.12%)      p.bountyDrawTime = m->getBountyDrawTime();
100,000 ( 0.06%)      p.command        = command;
      .               return p;
      .           }
      .           
      .           static void deliver(QuickdrawWirelessManager* target,
      .                               const uint8_t mac[6],
      .                               PerfPacket& pkt) {
500,000 ( 0.31%)      target->processQuickdrawCommand(
11,450,000 ( 7.13%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::processQuickdrawCommand(unsigned char const*, unsigned char const*, unsigned long) (100,000x)
      .                   mac,
      .                   reinterpret_cast<const uint8_t*>(&pkt),
      .                   sizeof(pkt));
      .           }
      .           
      .           // ============================================================
      .           // Device context — one per simulated device
      .           // ============================================================
      .           
     14 ( 0.00%)  struct DeviceCtx {
    278 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/include/game/player.hpp:Player::~Player() (2x)
      .               StubPeerComms    peerComms;
      .               StubStorage      storage;
      .               StubHttpClient   httpClient;
      .               WirelessManager* wirelessMgr   = nullptr;
      .               QuickdrawWirelessManager* qdWireless = nullptr;
      .               MatchManager*    matchMgr       = nullptr;
      .               Player           player;
      .           
     30 ( 0.00%)      void init(const char* userId, bool isHunter, const char* opponentMac) {
      .                   char id[5];
      2 ( 0.00%)          strncpy(id, userId, 4); id[4] = '\0';
      8 ( 0.00%)          player.setUserID(id);
    242 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::setUserID(char*) (2x)
     10 ( 0.00%)          player.setIsHunter(isHunter);
      6 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::setIsHunter(bool) (2x)
      6 ( 0.00%)          player.setOpponentMacAddress(opponentMac);
  8,463 ( 0.01%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/player.cpp:Player::setOpponentMacAddress(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (2x)
      .           
     10 ( 0.00%)          wirelessMgr = new WirelessManager(&peerComms, &httpClient);
    118 ( 0.00%)  => ???:0x000000000010f530 (2x)
     12 ( 0.00%)          qdWireless  = new QuickdrawWirelessManager();
    398 ( 0.00%)  => ???:0x000000000010f530 (2x)
     32 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::QuickdrawWirelessManager() (2x)
     12 ( 0.00%)          matchMgr    = new MatchManager();
    398 ( 0.00%)  => ???:0x000000000010f530 (2x)
     26 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::MatchManager() (2x)
      .           
     10 ( 0.00%)          qdWireless->initialize(&player, wirelessMgr, /*broadcastCooldown=*/0);
     10 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::initialize(Player*, WirelessManager*, long) (2x)
     12 ( 0.00%)          matchMgr->initialize(&player, &storage, &peerComms, qdWireless);
     20 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::initialize(Player*, StorageInterface*, PeerCommsInterface*, QuickdrawWirelessManager*) (2x)
     22 ( 0.00%)      }
      .           
     18 ( 0.00%)      void armCallback() {
     10 ( 0.00%)          qdWireless->setPacketReceivedCallback(
    550 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::setPacketReceivedCallback(std::function<void (QuickdrawCommand const&)> const&) (2x)
      .                       std::bind(&MatchManager::listenForMatchResults,
      .                                 matchMgr, std::placeholders::_1));
     16 ( 0.00%)      }
      .           
     12 ( 0.00%)      void destroy() {
     16 ( 0.00%)          delete matchMgr;
    198 ( 0.00%)  => ???:0x000000000010f540 (2x)
     26 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::~MatchManager() (2x)
     16 ( 0.00%)          delete qdWireless;
    198 ( 0.00%)  => ???:0x000000000010f540 (2x)
    290 ( 0.00%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/wireless/quickdraw-wireless-manager.cpp:QuickdrawWirelessManager::~QuickdrawWirelessManager() (2x)
     10 ( 0.00%)          delete wirelessMgr;
    198 ( 0.00%)  => ???:0x000000000010f540 (2x)
      6 ( 0.00%)      }
      .           };
      .           
      .           // ============================================================
      .           // Main
      .           // ============================================================
      .           
     14 ( 0.00%)  int main(int argc, char** argv) {
      1 ( 0.00%)      long numDuels = 10000;
      2 ( 0.00%)      if (argc >= 2) {
      .                   numDuels = atol(argv[1]);
      4 ( 0.00%)          if (numDuels < 1) numDuels = 1;
      .               }
      .           
      .               // Silence all LOG_* calls — prevents printf/stream overhead from
      .               // drowning out the business-logic signal in the profile.
      2 ( 0.00%)      NullLogger nullLogger;
      2 ( 0.00%)      g_logger = &nullLogger;
      .           
      3 ( 0.00%)      StepClock clock;
      .               SimpleTimer::setPlatformClock(&clock);
      .           
      .               // Seed the ID generator with a fixed value for reproducibility
      .               IdGenerator(42).seed(42);
      .           
      5 ( 0.00%)      DeviceCtx hunter, bounty;
    114 ( 0.00%)  => src/perf-main.cpp:DeviceCtx::DeviceCtx() (2x)
      5 ( 0.00%)      hunter.init("hunt", true,  "BB:BB:BB:BB:BB:BB");
  7,336 ( 0.00%)  => src/perf-main.cpp:DeviceCtx::init(char const*, bool, char const*) (1x)
      5 ( 0.00%)      bounty.init("boun", false, "AA:AA:AA:AA:AA:AA");
  4,792 ( 0.00%)  => src/perf-main.cpp:DeviceCtx::init(char const*, bool, char const*) (1x)
      .           
      .               // Wire each device's wireless manager to its own MatchManager callback
      2 ( 0.00%)      hunter.armCallback();
    646 ( 0.00%)  => src/perf-main.cpp:DeviceCtx::armCallback() (1x)
      2 ( 0.00%)      bounty.armCallback();
    502 ( 0.00%)  => src/perf-main.cpp:DeviceCtx::armCallback() (1x)
      .           
      3 ( 0.00%)      const uint8_t kHunterMac[6] = {0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA};
      3 ( 0.00%)      const uint8_t kBountyMac[6] = {0xBB, 0xBB, 0xBB, 0xBB, 0xBB, 0xBB};
      .           
      3 ( 0.00%)      long hunterWins = 0, bountyWins = 0, errors = 0;
      .           
      .               fprintf(stderr, "Running %ld duel cycles (no logging)...\n", numDuels);
      3 ( 0.00%)      const auto wallStart = std::chrono::steady_clock::now();
    881 ( 0.00%)  => ???:0x000000000010f5b0 (1x)
      .           
      .               // --------------------------------------------------------
      .               // Hot loop — this is what the profiler should see
      .               // --------------------------------------------------------
200,013 ( 0.12%)      for (long i = 0; i < numDuels; ++i) {
      .                   // Advance simulated time so each duel starts from a fresh baseline
      .                   clock.set(10000 + i * 5000UL);
      .                   const unsigned long duelStart = clock.time_ms;
      .           
      .                   // Create the match on both sides with a fixed ID per iteration.
      .                   // snprintf is the cheapest way to stamp a unique-enough ID without
      .                   // triggering UUID generation overhead (which we're not measuring).
      .                   char matchId[37];
      .                   snprintf(matchId, sizeof(matchId), "perf-%031ld", i);
      .           
350,000 ( 0.22%)          hunter.matchMgr->createMatch(matchId, "hunt", "boun");
10,300,000 ( 6.41%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::createMatch(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (50,000x)
350,000 ( 0.22%)          bounty.matchMgr->createMatch(matchId, "hunt", "boun");
10,300,000 ( 6.41%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::createMatch(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (50,000x)
150,000 ( 0.09%)          hunter.matchMgr->setDuelLocalStartTime(duelStart);
150,000 ( 0.09%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::setDuelLocalStartTime(unsigned long) (50,000x)
150,000 ( 0.09%)          bounty.matchMgr->setDuelLocalStartTime(duelStart);
150,000 ( 0.09%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::setDuelLocalStartTime(unsigned long) (50,000x)
      .           
      .                   // Vary press times so the profiler sees all result branches.
      .                   // Pattern covers: hunter faster, bounty faster, and close races.
500,000 ( 0.31%)          const long hunterPress = 100 + (i % 401);   // 100–500 ms
350,000 ( 0.22%)          const long bountyPress = 100 + (i % 397);   // 100–496 ms
      .           
100,000 ( 0.06%)          clock.set(duelStart + hunterPress);
200,000 ( 0.12%)          hunter.matchMgr->getDuelButtonPush()(hunter.matchMgr);
6,850,000 ( 4.27%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::initialize(Player*, StorageInterface*, PeerCommsInterface*, QuickdrawWirelessManager*)::{lambda(void*)#1}::_FUN(void*) (50,000x)
150,000 ( 0.09%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::getDuelButtonPush() (50,000x)
      .           
100,000 ( 0.06%)          clock.set(duelStart + bountyPress);
200,000 ( 0.12%)          bounty.matchMgr->getDuelButtonPush()(bounty.matchMgr);
6,800,000 ( 4.24%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::initialize(Player*, StorageInterface*, PeerCommsInterface*, QuickdrawWirelessManager*)::{lambda(void*)#1}::_FUN(void*) (50,000x)
150,000 ( 0.09%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::getDuelButtonPush() (50,000x)
      .           
      .                   // Exchange draw results (simulates the ESP-NOW packet crossing)
      .                   PerfPacket hunterPkt = makePacket(
 50,000 ( 0.03%)              hunter.matchMgr->getCurrentMatch(), QDCommand::DRAW_RESULT);
      .                   PerfPacket bountyPkt = makePacket(
 50,000 ( 0.03%)              bounty.matchMgr->getCurrentMatch(), QDCommand::DRAW_RESULT);
      .           
      .                   deliver(bounty.qdWireless, kHunterMac, hunterPkt);
      .                   deliver(hunter.qdWireless, kBountyMac, bountyPkt);
      .           
      .                   // Sanity check: both sides must agree on the winner
150,000 ( 0.09%)          const bool hw = hunter.matchMgr->didWin();
2,000,000 ( 1.25%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::didWin() (50,000x)
100,000 ( 0.06%)          const bool bw = bounty.matchMgr->didWin();
2,000,000 ( 1.25%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::didWin() (50,000x)
100,000 ( 0.06%)          if (hw == bw) {
    794 ( 0.00%)              ++errors;
      .                   } else {
170,281 ( 0.11%)              hw ? ++hunterWins : ++bountyWins;
      .                   }
      .           
      .                   // Reset for next iteration
100,000 ( 0.06%)          hunter.matchMgr->clearCurrentMatch();
2,450,000 ( 1.53%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::clearCurrentMatch() (50,000x)
100,000 ( 0.06%)          bounty.matchMgr->clearCurrentMatch();
2,450,000 ( 1.53%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::clearCurrentMatch() (50,000x)
      .               }
      .               // --------------------------------------------------------
      .           
      1 ( 0.00%)      const auto wallEnd = std::chrono::steady_clock::now();
     30 ( 0.00%)  => ???:0x000000000010f5b0 (1x)
      .               const double wallMs =
      .                   std::chrono::duration<double, std::milli>(wallEnd - wallStart).count();
      .           
      .               fprintf(stderr, "\n=== Duel Simulation Results ===\n");
      .               fprintf(stderr, "Duels run:    %ld\n",       numDuels);
      4 ( 0.00%)      fprintf(stderr, "Hunter wins:  %ld (%.1f%%)\n", hunterWins,
      4 ( 0.00%)              100.0 * hunterWins / numDuels);
      1 ( 0.00%)      fprintf(stderr, "Bounty wins:  %ld (%.1f%%)\n", bountyWins,
      4 ( 0.00%)              100.0 * bountyWins / numDuels);
      .               fprintf(stderr, "Errors:       %ld\n",        errors);
      .               fprintf(stderr, "Wall time:    %.2f ms\n",    wallMs);
      3 ( 0.00%)      fprintf(stderr, "Avg/duel:     %.4f ms\n",    wallMs / numDuels);
      2 ( 0.00%)      fprintf(stderr, "Throughput:   %.0f duels/s\n",
      2 ( 0.00%)              numDuels / (wallMs / 1000.0));
      .           
      2 ( 0.00%)      hunter.destroy();
    485 ( 0.00%)  => src/perf-main.cpp:DeviceCtx::destroy() (1x)
      2 ( 0.00%)      bounty.destroy();
    485 ( 0.00%)  => src/perf-main.cpp:DeviceCtx::destroy() (1x)
      .               SimpleTimer::setPlatformClock(nullptr);
      .           
      3 ( 0.00%)      return errors > 0 ? 1 : 0;
     23 ( 0.00%)  }
      .           
      .           #endif // NATIVE_BUILD && PERF_BUILD

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/c++/11/bits/char_traits.h
--------------------------------------------------------------------------------
Ir                 

-- line 349 ----------------------------------------
        .                 typedef streamoff         off_type;
        .                 typedef mbstate_t         state_type;
        .           #if __cpp_lib_three_way_comparison
        .                 using comparison_category = strong_ordering;
        .           #endif
        .           
        .                 static _GLIBCXX17_CONSTEXPR void
        .                 assign(char_type& __c1, const char_type& __c2) _GLIBCXX_NOEXCEPT
  300,943 ( 0.19%)        { __c1 = __c2; }
        .           
        .                 static _GLIBCXX_CONSTEXPR bool
        .                 eq(const char_type& __c1, const char_type& __c2) _GLIBCXX_NOEXCEPT
        .                 { return __c1 == __c2; }
        .           
        .                 static _GLIBCXX_CONSTEXPR bool
        .                 lt(const char_type& __c1, const char_type& __c2) _GLIBCXX_NOEXCEPT
        .                 {
-- line 365 ----------------------------------------
-- line 391 ----------------------------------------
        .           
        .                 static _GLIBCXX17_CONSTEXPR size_t
        .                 length(const char_type* __s)
        .                 {
        .           #if __cplusplus >= 201703L
        .           	if (__constant_string_p(__s))
        .           	  return __gnu_cxx::char_traits<char_type>::length(__s);
        .           #endif
  301,536 ( 0.19%)  	return __builtin_strlen(__s);
       32 ( 0.00%)  => ???:0x000000000010f420 (2x)
        .                 }
        .           
        .                 static _GLIBCXX17_CONSTEXPR const char_type*
        .                 find(const char_type* __s, size_t __n, const char_type& __a)
        .                 {
        .           	if (__n == 0)
        .           	  return 0;
        .           #if __cplusplus >= 201703L
-- line 407 ----------------------------------------
-- line 423 ----------------------------------------
        .           	  return __gnu_cxx::char_traits<char_type>::move(__s1, __s2, __n);
        .           #endif
        .           	return static_cast<char_type*>(__builtin_memmove(__s1, __s2, __n));
        .                 }
        .           
        .                 static _GLIBCXX20_CONSTEXPR char_type*
        .                 copy(char_type* __s1, const char_type* __s2, size_t __n)
        .                 {
      421 ( 0.00%)  	if (__n == 0)
        .           	  return __s1;
        .           #ifdef __cpp_lib_is_constant_evaluated
        .           	if (std::is_constant_evaluated())
        .           	  return __gnu_cxx::char_traits<char_type>::copy(__s1, __s2, __n);
        .           #endif
4,000,734 ( 2.49%)  	return static_cast<char_type*>(__builtin_memcpy(__s1, __s2, __n));
       68 ( 0.00%)  => ???:0x000000000010f4f0 (4x)
        .                 }
        .           
        .                 static _GLIBCXX20_CONSTEXPR char_type*
        .                 assign(char_type* __s, size_t __n, char_type __a)
        .                 {
        .           	if (__n == 0)
        .           	  return __s;
        .           #ifdef __cpp_lib_is_constant_evaluated
-- line 445 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/c++/11/optional
--------------------------------------------------------------------------------
Ir               

-- line 103 ----------------------------------------
      .           
      .             // This class template manages construction/destruction of
      .             // the contained value for a std::optional.
      .             template <typename _Tp>
      .               struct _Optional_payload_base
      .               {
      .                 using _Stored_type = remove_const_t<_Tp>;
      .           
      2 ( 0.00%)        _Optional_payload_base() = default;
      .                 ~_Optional_payload_base() = default;
      .           
      .                 template<typename... _Args>
      .           	constexpr
      .           	_Optional_payload_base(in_place_t __tag, _Args&&... __args)
      .           	: _M_payload(__tag, std::forward<_Args>(__args)...),
      .           	  _M_engaged(true)
      .           	{ }
-- line 119 ----------------------------------------
-- line 245 ----------------------------------------
      .           
      .                 template<typename... _Args>
      .           	constexpr void
      .           	_M_construct(_Args&&... __args)
      .           	noexcept(is_nothrow_constructible_v<_Stored_type, _Args...>)
      .           	{
      .           	  std::_Construct(std::__addressof(this->_M_payload._M_value),
      .           			  std::forward<_Args>(__args)...);
100,000 ( 0.06%)  	  this->_M_engaged = true;
      .           	}
      .           
      .                 constexpr void
      .                 _M_destroy() noexcept
      .                 {
100,000 ( 0.06%)  	_M_engaged = false;
      .           	_M_payload._M_value.~_Stored_type();
      .                 }
      .           
      .                 // The _M_get() operations have _M_engaged as a precondition.
      .                 // They exist to access the contained value with the appropriate
      .                 // const-qualification, because _M_payload has had the const removed.
      .           
      .                 constexpr _Tp&
      .                 _M_get() noexcept
250,000 ( 0.16%)        { return this->_M_payload._M_value; }
      .           
      .                 constexpr const _Tp&
      .                 _M_get() const noexcept
      .                 { return this->_M_payload._M_value; }
      .           
      .                 // _M_reset is a 'safe' operation with no precondition.
      .                 constexpr void
      .                 _M_reset() noexcept
      .                 {
300,000 ( 0.19%)  	if (this->_M_engaged)
      .           	  _M_destroy();
      .                 }
      .               };
      .           
      .             // Class template that manages the payload for optionals.
      .             template <typename _Tp,
      .           	    bool /*_HasTrivialDestructor*/ =
      .           	      is_trivially_destructible_v<_Tp>,
-- line 287 ----------------------------------------
-- line 425 ----------------------------------------
      .                 { static_cast<_Dp*>(this)->_M_payload._M_destroy(); }
      .           
      .                 // _M_reset is a 'safe' operation with no precondition.
      .                 constexpr void
      .                 _M_reset() noexcept
      .                 { static_cast<_Dp*>(this)->_M_payload._M_reset(); }
      .           
      .                 constexpr bool _M_is_engaged() const noexcept
100,000 ( 0.06%)        { return static_cast<const _Dp*>(this)->_M_payload._M_engaged; }
      .           
      .                 // The _M_get operations have _M_engaged as a precondition.
      .                 constexpr _Tp&
      .                 _M_get() noexcept
      .                 {
      .           	__glibcxx_assert(this->_M_is_engaged());
      .           	return static_cast<_Dp*>(this)->_M_payload._M_get();
      .                 }
-- line 441 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/c++/11/bits/basic_string.tcc
--------------------------------------------------------------------------------
Ir               

-- line 207 ----------------------------------------
      .                 _M_construct(_InIterator __beg, _InIterator __end,
      .           		   std::forward_iterator_tag)
      .                 {
      .           	// NB: Not required, but considered best practice.
      .           	if (__gnu_cxx::__is_null_pointer(__beg) && __beg != __end)
      .           	  std::__throw_logic_error(__N("basic_string::"
      .           				       "_M_construct null not valid"));
      .           
100,464 ( 0.06%)  	size_type __dnew = static_cast<size_type>(std::distance(__beg, __end));
      .           
200,928 ( 0.13%)  	if (__dnew > size_type(_S_local_capacity))
      .           	  {
500,027 ( 0.31%)  	    _M_data(_M_create(__dnew, size_type(0)));
    866 ( 0.00%)  => ???:0x000000000010f6d0 (1x)
      .           	    _M_capacity(__dnew);
      .           	  }
      .           
      .           	// Check for out_of_range and length_error exceptions.
      .           	__try
  1,280 ( 0.00%)  	  { this->_S_copy_chars(_M_data(), __beg, __end); }
  9,757 ( 0.01%)  => ???:0x000000000010f560 (320x)
      .           	__catch(...)
      .           	  {
      .           	    _M_dispose();
      .           	    __throw_exception_again;
      .           	  }
      .           
100,464 ( 0.06%)  	_M_set_length(__dnew);
      .                 }
      .           
      .             template<typename _CharT, typename _Traits, typename _Alloc>
      .               void
      .               basic_string<_CharT, _Traits, _Alloc>::
      .               _M_construct(size_type __n, _CharT __c)
      .               {
      .                 if (__n > size_type(_S_local_capacity))
-- line 240 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/x86_64-linux-gnu/bits/stdio2.h
--------------------------------------------------------------------------------
Ir               

-- line 63 ----------------------------------------
      .           			    size_t __slen, const char *__restrict __format,
      .           			    __gnuc_va_list __ap) __THROW;
      .           
      .           # ifdef __va_arg_pack
      .           __fortify_function int
      .           __NTH (snprintf (char *__restrict __s, size_t __n,
      .           		 const char *__restrict __fmt, ...))
      .           {
400,000 ( 0.25%)    return __builtin___snprintf_chk (__s, __n, __USE_FORTIFY_LEVEL - 1,
54,983,343 (34.24%)  => ???:0x000000000010f480 (50,000x)
      .           				   __glibc_objsize (__s), __fmt,
      .           				   __va_arg_pack ());
      .           }
      .           # elif !defined __cplusplus
      .           #  define snprintf(str, len, ...) \
      .             __builtin___snprintf_chk (str, len, __USE_FORTIFY_LEVEL - 1,		      \
      .           			    __glibc_objsize (str), __VA_ARGS__)
      .           # endif
-- line 79 ----------------------------------------
-- line 97 ----------------------------------------
      .           			   const char *__restrict __format, __gnuc_va_list __ap);
      .           extern int __vprintf_chk (int __flag, const char *__restrict __format,
      .           			  __gnuc_va_list __ap);
      .           
      .           # ifdef __va_arg_pack
      .           __fortify_function int
      .           fprintf (FILE *__restrict __stream, const char *__restrict __fmt, ...)
      .           {
     50 ( 0.00%)    return __fprintf_chk (__stream, __USE_FORTIFY_LEVEL - 1, __fmt,
 16,817 ( 0.01%)  => ???:0x000000000010f690 (9x)
      .           			__va_arg_pack ());
      .           }
      .           
      .           __fortify_function int
      .           printf (const char *__restrict __fmt, ...)
      .           {
      .             return __printf_chk (__USE_FORTIFY_LEVEL - 1, __fmt, __va_arg_pack ());
      .           }
-- line 113 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: include/device/wireless-manager.hpp
--------------------------------------------------------------------------------
Ir               

-- line 34 ----------------------------------------
      .            * 2. Connect the target subsystem
      .            * 
      .            * This is a pure C++ class that delegates platform-specific operations to the
      .            * HttpClientInterface and PeerCommsInterface.
      .            */
      .           class WirelessManager {
      .           public:
      .               WirelessManager(PeerCommsInterface* peerComms, HttpClientInterface* httpClient)
      2 ( 0.00%)          : peerComms(peerComms)
      .                   , httpClient(httpClient)
      2 ( 0.00%)          , currentMode(WirelessMode::ESPNOW) {  // Start in ESP-NOW mode (safer default)
      .               }
      .           
      .               ~WirelessManager() = default;
      .               
      .               /**
      .                * Initialize the wireless manager. Should be called once at startup.
      .                * Ensures the subsystems are in a consistent initial state.
      .                */
-- line 52 ----------------------------------------
-- line 140 ----------------------------------------
      .                          httpClient->getHttpClientState() == HttpClientState::CONNECTED &&
      .                          httpClient->isConnected();
      .               }
      .               
      .               /**
      .                * Check if ESP-NOW is active and ready.
      .                */
      .               bool isEspNowReady() {
400,000 ( 0.25%)          return currentMode == WirelessMode::ESPNOW && 
200,000 ( 0.12%)                 peerComms->getPeerCommsState() == PeerCommsState::CONNECTED;
300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/perf-main.cpp:StubPeerComms::getPeerCommsState() (100,000x)
      .               }
      .               
      .               /**
      .                * Queue an HTTP request. Automatically switches to WiFi mode if needed.
      .                * @param request The HTTP request to queue
      .                * @return true if request was queued successfully
      .                */
      .               bool queueHttpRequest(HttpRequest& request) {
-- line 157 ----------------------------------------
-- line 171 ----------------------------------------
      .                * @param dst Destination MAC address
      .                * @param packetType Type of packet
      .                * @param data Pointer to data buffer
      .                * @param length Length of data
      .                * @return 0 on success, negative on error
      .                */
      .               int sendEspNowData(const uint8_t* dst, PktType packetType, const uint8_t* data, size_t length) {
      .                   // Auto-switch to ESP-NOW mode if needed
300,000 ( 0.19%)          if (currentMode != WirelessMode::ESPNOW) {
      .                       LOG_I(WM_TAG, "Auto-switching to ESP-NOW mode for peer communication");
      .                       enablePeerCommsMode();
      .                   }
      .                   
      .                   if (!isEspNowReady()) {
      .                       LOG_W(WM_TAG, "Cannot send ESP-NOW data - ESP-NOW not ready");
      .                       return -1;
      .                   }
      .                   
600,000 ( 0.37%)          return peerComms->sendData(dst, packetType, data, length);
300,000 ( 0.19%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/perf-main.cpp:StubPeerComms::sendData(unsigned char const*, PktType, unsigned char const*, unsigned long) (100,000x)
      .               }
      .               
      .               /**
      .                * Set packet handler for ESP-NOW received packets.
      .                * Note: Handlers can be set regardless of current mode.
      .                */
      .               void setEspNowPacketHandler(PktType packetType, PeerCommsInterface::PacketCallback callback, void* ctx) {
      .                   peerComms->setPacketHandler(packetType, callback, ctx);
-- line 197 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/c++/11/bits/invoke.h
--------------------------------------------------------------------------------
Ir               

-- line 66 ----------------------------------------
      .           		  _Args&&... __args)
      .               { return (__invfwd<_Tp>(__t).*__f)(std::forward<_Args>(__args)...); }
      .           
      .             template<typename _Res, typename _MemFun, typename _Tp, typename... _Args>
      .               constexpr _Res
      .               __invoke_impl(__invoke_memfun_deref, _MemFun&& __f, _Tp&& __t,
      .           		  _Args&&... __args)
      .               {
500,000 ( 0.31%)        return ((*std::forward<_Tp>(__t)).*__f)(std::forward<_Args>(__args)...);
3,650,000 ( 2.27%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/game/match-manager.cpp:MatchManager::listenForMatchResults(QuickdrawCommand const&) (100,000x)
      .               }
      .           
      .             template<typename _Res, typename _MemPtr, typename _Tp>
      .               constexpr _Res
      .               __invoke_impl(__invoke_memobj_ref, _MemPtr&& __f, _Tp&& __t)
      .               { return __invfwd<_Tp>(__t).*__f; }
      .           
      .             template<typename _Res, typename _MemPtr, typename _Tp>
      .               constexpr _Res
      .               __invoke_impl(__invoke_memobj_deref, _MemPtr&& __f, _Tp&& __t)
      .               { return (*std::forward<_Tp>(__t)).*__f; }
      .           
      .             /// Invoke a callable object.
      .             template<typename _Callable, typename... _Args>
      .               constexpr typename __invoke_result<_Callable, _Args...>::type
100,000 ( 0.06%)      __invoke(_Callable&& __fn, _Args&&... __args)
      .               noexcept(__is_nothrow_invocable<_Callable, _Args...>::value)
      .               {
      .                 using __result = __invoke_result<_Callable, _Args...>;
      .                 using __type = typename __result::type;
      .                 using __tag = typename __result::__invoke_type;
      .                 return std::__invoke_impl<__type>(__tag{}, std::forward<_Callable>(__fn),
      .           					std::forward<_Args>(__args)...);
      .               }
-- line 98 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/c++/11/bits/std_function.h
--------------------------------------------------------------------------------
Ir               

-- line 134 ----------------------------------------
      .           	_M_get_pointer(const _Any_data& __source)
      .           	{
      .           	  if _GLIBCXX17_CONSTEXPR (__stored_locally)
      .           	    {
      .           	      const _Functor& __f = __source._M_access<_Functor>();
      .           	      return const_cast<_Functor*>(std::__addressof(__f));
      .           	    }
      .           	  else // have stored a pointer
100,002 ( 0.06%)  	    return __source._M_access<_Functor*>();
      .           	}
      .           
      .                 private:
      .           	// Construct a location-invariant function object that fits within
      .           	// an _Any_data structure.
      .           	template<typename _Fn>
      .           	  static void
      .           	  _M_create(_Any_data& __dest, _Fn&& __f, true_type)
-- line 150 ----------------------------------------
-- line 153 ----------------------------------------
      .           	  }
      .           
      .           	// Construct a function object on the heap and store a pointer.
      .           	template<typename _Fn>
      .           	  static void
      .           	  _M_create(_Any_data& __dest, _Fn&& __f, false_type)
      .           	  {
      .           	    __dest._M_access<_Functor*>()
     20 ( 0.00%)  	      = new _Functor(std::forward<_Fn>(__f));
    406 ( 0.00%)  => ???:0x000000000010f530 (2x)
      2 ( 0.00%)  	  }
      .           
      .           	// Destroy an object stored in the internal buffer.
      .           	static void
      .           	_M_destroy(_Any_data& __victim, true_type)
      .           	{
      .           	  __victim._M_access<_Functor>().~_Functor();
      .           	}
      .           
      .           	// Destroy an object located on the heap.
      .           	static void
      .           	_M_destroy(_Any_data& __victim, false_type)
      .           	{
     20 ( 0.00%)  	  delete __victim._M_access<_Functor*>();
    396 ( 0.00%)  => ???:0x000000000010f540 (4x)
      .           	}
      .           
      .                 public:
      .           	static bool
      .           	_M_manager(_Any_data& __dest, const _Any_data& __source,
      .           		   _Manager_operation __op)
      .           	{
     20 ( 0.00%)  	  switch (__op)
      .           	    {
      .           	    case __get_type_info:
      .           #if __cpp_rtti
      .           	      __dest._M_access<const type_info*>() = &typeid(_Functor);
      .           #else
      .           	      __dest._M_access<const type_info*>() = nullptr;
      .           #endif
      .           	      break;
-- line 191 ----------------------------------------
-- line 235 ----------------------------------------
      .           	  _M_not_empty_function(const _Tp&)
      .           	  { return true; }
      .                 };
      .           
      .               _Function_base() = default;
      .           
      .               ~_Function_base()
      .               {
     16 ( 0.00%)        if (_M_manager)
     14 ( 0.00%)  	_M_manager(_M_functor, _M_functor, __destroy_functor);
    246 ( 0.00%)  => /usr/include/c++/11/bits/std_function.h:std::_Function_handler<void (QuickdrawCommand const&), std::_Bind<void (MatchManager::*(MatchManager*, std::_Placeholder<1>))(QuickdrawCommand const&)> >::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation) (2x)
      .               }
      .           
      2 ( 0.00%)      bool _M_empty() const { return !_M_manager; }
      .           
      .               using _Manager_type
      .                 = bool (*)(_Any_data&, const _Any_data&, _Manager_operation);
      .           
      .               _Any_data     _M_functor{};
      .               _Manager_type _M_manager{};
      .             };
      .           
-- line 255 ----------------------------------------
-- line 259 ----------------------------------------
      .             template<typename _Res, typename _Functor, typename... _ArgTypes>
      .               class _Function_handler<_Res(_ArgTypes...), _Functor>
      .               : public _Function_base::_Base_manager<_Functor>
      .               {
      .                 using _Base = _Function_base::_Base_manager<_Functor>;
      .           
      .               public:
      .                 static bool
     36 ( 0.00%)        _M_manager(_Any_data& __dest, const _Any_data& __source,
      .           		 _Manager_operation __op)
      .                 {
     24 ( 0.00%)  	switch (__op)
      .           	  {
      .           #if __cpp_rtti
      .           	  case __get_type_info:
      .           	    __dest._M_access<const type_info*>() = &typeid(_Functor);
      .           	    break;
      .           #endif
      .           	  case __get_functor_ptr:
      .           	    __dest._M_access<_Functor*>() = _Base::_M_get_pointer(__source);
      .           	    break;
      .           
      .           	  default:
      .           	    _Base::_M_manager(__dest, __source, __op);
      .           	  }
      .           	return false;
     30 ( 0.00%)        }
      .           
      .                 static _Res
100,000 ( 0.06%)        _M_invoke(const _Any_data& __functor, _ArgTypes&&... __args)
      .                 {
      .           	return std::__invoke_r<_Res>(*_Base::_M_get_pointer(__functor),
      .           				     std::forward<_ArgTypes>(__args)...);
      .                 }
      .           
      .                 template<typename _Fn>
      .           	static constexpr bool
      .           	_S_nothrow_init() noexcept
-- line 296 ----------------------------------------
-- line 326 ----------------------------------------
      .               { };
      .           
      .             /**
      .              *  @brief Polymorphic function wrapper.
      .              *  @ingroup functors
      .              *  @since C++11
      .              */
      .             template<typename _Res, typename... _ArgTypes>
      2 ( 0.00%)      class function<_Res(_ArgTypes...)>
      .               : public _Maybe_unary_or_binary_function<_Res, _ArgTypes...>,
      .                 private _Function_base
      .               {
      .                 // Equivalent to std::decay_t except that it produces an invalid type
      .                 // if the decayed type is the current specialization of std::function.
      .                 template<typename _Func,
      .           	       bool _Self = is_same<__remove_cvref_t<_Func>, function>::value>
      .           	using _Decay_t
-- line 342 ----------------------------------------
-- line 361 ----------------------------------------
      .           
      .                 // [3.7.2.1] construct/copy/destroy
      .           
      .                 /**
      .                  *  @brief Default construct creates an empty function call wrapper.
      .                  *  @post `!(bool)*this`
      .                  */
      .                 function() noexcept
      8 ( 0.00%)        : _Function_base() { }
      .           
      .                 /**
      .                  *  @brief Creates an empty function call wrapper.
      .                  *  @post @c !(bool)*this
      .                  */
      .                 function(nullptr_t) noexcept
      .                 : _Function_base() { }
      .           
-- line 377 ----------------------------------------
-- line 379 ----------------------------------------
      .                  *  @brief %Function copy constructor.
      .                  *  @param __x A %function object with identical call signature.
      .                  *  @post `bool(*this) == bool(__x)`
      .                  *
      .                  *  The newly-created %function contains a copy of the target of
      .                  *  `__x` (if it has one).
      .                  */
      .                 function(const function& __x)
      8 ( 0.00%)        : _Function_base()
      .                 {
      4 ( 0.00%)  	if (static_cast<bool>(__x))
      .           	  {
     10 ( 0.00%)  	    __x._M_manager(_M_functor, __x._M_functor, __clone_functor);
    458 ( 0.00%)  => /usr/include/c++/11/bits/std_function.h:std::_Function_handler<void (QuickdrawCommand const&), std::_Bind<void (MatchManager::*(MatchManager*, std::_Placeholder<1>))(QuickdrawCommand const&)> >::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation) (2x)
      2 ( 0.00%)  	    _M_invoker = __x._M_invoker;
      2 ( 0.00%)  	    _M_manager = __x._M_manager;
      .           	  }
      .                 }
      .           
      .                 /**
      .                  *  @brief %Function move constructor.
      .                  *  @param __x A %function object rvalue with identical call signature.
      .                  *
      .                  *  The newly-created %function contains the target of `__x`
-- line 401 ----------------------------------------
-- line 429 ----------------------------------------
      .                  *  `reference_wrapper<F>`, this function will not throw.
      .                  */
      .                 // _GLIBCXX_RESOLVE_LIB_DEFECTS
      .                 // 2774. std::function construction vs assignment
      .                 template<typename _Functor,
      .           	       typename _Constraints = _Requires<_Callable<_Functor>>>
      .           	function(_Functor&& __f)
      .           	noexcept(_Handler<_Functor>::template _S_nothrow_init<_Functor>())
      8 ( 0.00%)  	: _Function_base()
      .           	{
      .           	  static_assert(is_copy_constructible<__decay_t<_Functor>>::value,
      .           	      "std::function target must be copy-constructible");
      .           	  static_assert(is_constructible<__decay_t<_Functor>, _Functor>::value,
      .           	      "std::function target must be constructible from the "
      .           	      "constructor argument");
      .           
      .           	  using _My_handler = _Handler<_Functor>;
      .           
      .           	  if (_My_handler::_M_not_empty_function(__f))
      .           	    {
      .           	      _My_handler::_M_init_functor(_M_functor,
      .           					   std::forward<_Functor>(__f));
      4 ( 0.00%)  	      _M_invoker = &_My_handler::_M_invoke;
      4 ( 0.00%)  	      _M_manager = &_My_handler::_M_manager;
      .           	    }
      .           	}
      .           
      .                 /**
      .                  *  @brief %Function assignment operator.
      .                  *  @param __x A %function with identical call signature.
      .                  *  @post @c (bool)*this == (bool)x
      .                  *  @returns @c *this
-- line 460 ----------------------------------------
-- line 582 ----------------------------------------
      .                  *  The function call operator invokes the target function object
      .                  *  stored by @c this.
      .                  */
      .                 _Res
      .                 operator()(_ArgTypes... __args) const
      .                 {
      .           	if (_M_empty())
      .           	  __throw_bad_function_call();
500,000 ( 0.31%)  	return _M_invoker(_M_functor, std::forward<_ArgTypes>(__args)...);
4,450,000 ( 2.77%)  => /usr/include/c++/11/bits/std_function.h:std::_Function_handler<void (QuickdrawCommand const&), std::_Bind<void (MatchManager::*(MatchManager*, std::_Placeholder<1>))(QuickdrawCommand const&)> >::_M_invoke(std::_Any_data const&, QuickdrawCommand const&) (100,000x)
      .                 }
      .           
      .           #if __cpp_rtti
      .                 // [3.7.2.5] function target access
      .                 /**
      .                  *  @brief Determine the type of the target of this function object
      .                  *  wrapper.
      .                  *
-- line 598 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: src/match.cpp
--------------------------------------------------------------------------------
Ir                 

        .           #include "game/match.hpp"
        .           #include "id-generator.hpp"
        .           #include "device/drivers/logger.hpp"
        .           #include <ArduinoJson.h>
        .           #include <string.h> // for memcpy
        .           
1,000,000 ( 0.62%)  Match::Match(const char* mid, const char* hunter_id, const char* bounty_id)
1,100,000 ( 0.69%)      : hunter_draw_time_ms(0), bounty_draw_time_ms(0) {
  300,000 ( 0.19%)      strncpy(match_id, mid ? mid : "", IdGenerator::UUID_BUFFER_SIZE - 1);
        .               match_id[IdGenerator::UUID_BUFFER_SIZE - 1] = '\0';
  200,000 ( 0.12%)      strncpy(hunter, hunter_id ? hunter_id : "", 4);
        .               hunter[4] = '\0';
  200,000 ( 0.12%)      strncpy(bounty, bounty_id ? bounty_id : "", 4);
        .               bounty[4] = '\0';
  500,000 ( 0.31%)  }
        .           
  100,000 ( 0.06%)  Match::Match(const std::string& mid, const std::string& hunter_id, const std::string& bounty_id)
  400,000 ( 0.25%)      : Match(mid.c_str(), hunter_id.c_str(), bounty_id.c_str()) {
18,300,000 (11.40%)  => src/match.cpp:Match::Match(char const*, char const*, char const*) (100,000x)
        .           }
        .           
  100,000 ( 0.06%)  Match::Match(const char* mid, const char* hunter_id, const char* bounty_id,
        .                        unsigned long hunter_time, unsigned long bounty_time)
1,100,000 ( 0.69%)      : hunter_draw_time_ms(hunter_time), bounty_draw_time_ms(bounty_time) {
        .               memcpy(match_id, mid, IdGenerator::UUID_STRING_LENGTH);
        .               match_id[IdGenerator::UUID_STRING_LENGTH] = '\0';
        .               memcpy(hunter, hunter_id, 4);
        .               hunter[4] = '\0';
        .               memcpy(bounty, bounty_id, 4);
        .               bounty[4] = '\0';
  100,000 ( 0.06%)  }
        .           
        .           Match::Match(){
        .               match_id[0] = '\0';
        .               hunter[0]   = '\0';
        .               bounty[0]   = '\0';
        .               hunter_draw_time_ms = 0;
        .               bounty_draw_time_ms = 0;
        .           }
-- line 38 ----------------------------------------
-- line 45 ----------------------------------------
        .               hunter[4] = '\0';
        .               strncpy(bounty, b.c_str(), 4);
        .               bounty[4] = '\0';
        .               hunter_draw_time_ms = 0;
        .               bounty_draw_time_ms = 0;
        .           }
        .           
        .           
  100,000 ( 0.06%)  void Match::setHunterDrawTime(unsigned long timeMs) {
  100,000 ( 0.06%)      hunter_draw_time_ms = timeMs;
  100,000 ( 0.06%)  }
        .           
  100,000 ( 0.06%)  void Match::setBountyDrawTime(unsigned long timeMs) {
  100,000 ( 0.06%)      bounty_draw_time_ms = timeMs;
  100,000 ( 0.06%)  }
        .           
        .           std::string Match::toJson() const
        .           {
        .               // LOG_I("Match", "Serializing JSON: %s", match_id.c_str());
        .               // LOG_I("Match", "Hunter: %s", hunter.c_str());
        .               // LOG_I("Match", "Bounty: %s", bounty.c_str());
        .               // LOG_I("Match", "Hunter draw time: %lu", hunter_draw_time_ms);
        .               // LOG_I("Match", "Bounty draw time: %lu", bounty_draw_time_ms);
-- line 67 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: src/wireless/quickdraw-wireless-manager.cpp
--------------------------------------------------------------------------------
Ir                 

-- line 8 ----------------------------------------
        .               char matchId[IdGenerator::UUID_BUFFER_SIZE];
        .               char hunterId[5];  // 4 chars + null terminator
        .               char bountyId[5];  // 4 chars + null terminator
        .               long hunterDrawTime;
        .               long bountyDrawTime;
        .               int command;
        .           } __attribute__((packed));
        .           
       12 ( 0.00%)  QuickdrawWirelessManager::QuickdrawWirelessManager() : broadcastTimer() {}
        .           
       12 ( 0.00%)  QuickdrawWirelessManager::~QuickdrawWirelessManager() {
        2 ( 0.00%)      player = nullptr;
        2 ( 0.00%)      wirelessManager = nullptr;
        8 ( 0.00%)  }
        .           
        2 ( 0.00%)  void QuickdrawWirelessManager::initialize(Player *player, WirelessManager* wirelessManager, long broadcastDelay) {
        2 ( 0.00%)      this->player = player;
        2 ( 0.00%)      this->broadcastDelay = broadcastDelay;
        2 ( 0.00%)      this->wirelessManager = wirelessManager;
        2 ( 0.00%)  }
        .           
        .           void QuickdrawWirelessManager::clearCallbacks() {
        .               packetReceivedCallback = nullptr;
        .           }
        .           
       22 ( 0.00%)  void QuickdrawWirelessManager::setPacketReceivedCallback(const std::function<void(const QuickdrawCommand&)>& callback) {
        .               packetReceivedCallback = callback;
       18 ( 0.00%)  }
        .           
        .           int QuickdrawWirelessManager::broadcastPacket(const uint8_t* macAddress,
        .                                                        int command,
  900,000 ( 0.56%)                                               const Match& match) {
  200,000 ( 0.12%)      if (!macAddress) {
        .                   return -1;
        .               }
        .           
        .               QuickdrawPacket qdPacket;
  100,000 ( 0.06%)      qdPacket.command = command;
        .           
        .               memcpy(qdPacket.matchId, match.getMatchId(), IdGenerator::UUID_STRING_LENGTH);
  200,000 ( 0.12%)      qdPacket.matchId[IdGenerator::UUID_STRING_LENGTH] = '\0';
        .           
        .               memcpy(qdPacket.hunterId, match.getHunterId(), 4);
  100,000 ( 0.06%)      qdPacket.hunterId[4] = '\0';
        .           
        .               memcpy(qdPacket.bountyId, match.getBountyId(), 4);
  300,000 ( 0.19%)      qdPacket.bountyId[4] = '\0';
        .           
  200,000 ( 0.12%)      qdPacket.hunterDrawTime = match.getHunterDrawTime();
  200,000 ( 0.12%)      qdPacket.bountyDrawTime = match.getBountyDrawTime();
        .           
        .               LOG_I("QWM", "Sending command %i to %s", command, MacToString(macAddress));
        .               LOG_I("QWM", "Match ID: %s", qdPacket.matchId);
        .               LOG_I("QWM", "Hunter Draw Time: %ld, Bounty Draw Time: %ld",
        .                     qdPacket.hunterDrawTime, qdPacket.bountyDrawTime);
        .           
  100,000 ( 0.06%)      return wirelessManager->sendEspNowData(
        .                   macAddress,
        .                   PktType::kQuickdrawCommand,
        .                   reinterpret_cast<const uint8_t*>(&qdPacket),
        .                   sizeof(qdPacket));
  800,000 ( 0.50%)  }
        .           
        .           
        .           int QuickdrawWirelessManager::processQuickdrawCommand(const uint8_t *macAddress, const uint8_t *data,
  600,000 ( 0.37%)      const size_t dataLen) {
        .           
  200,000 ( 0.12%)      if(dataLen != sizeof(QuickdrawPacket)) {
        .                   LOG_E("RPM", "Unexpected packet len for PlayerInfoPkt. Got %lu but expected %lu\n",
        .                                 dataLen, sizeof(QuickdrawPacket));
        .           
  300,000 ( 0.19%)          return -1;
        .               }
        .           
        .               const QuickdrawPacket* packet = reinterpret_cast<const QuickdrawPacket*>(data);
        .           
  100,000 ( 0.06%)      QuickdrawCommand command(macAddress, packet->command,
  200,000 ( 0.12%)                               packet->matchId, packet->hunterId, packet->bountyId,
        .                                        packet->hunterDrawTime, packet->bountyDrawTime);
        .           
  300,000 ( 0.19%)      if(packetReceivedCallback) {
        .                   packetReceivedCallback(command);
        .               }
        .           
  100,000 ( 0.06%)      return 1;
1,000,012 ( 0.62%)  }
--------------------------------------------------------------------------------
-- Auto-annotated source: src/player.cpp
--------------------------------------------------------------------------------
Ir               

-- line 52 ----------------------------------------
      .           }
      .           
      .           void Player::toggleHunter()
      .           {
      .             hunter = !hunter;
      .           }
      .           
      .           void Player::setIsHunter(bool isHunter) 
      2 ( 0.00%)  {
      2 ( 0.00%)    hunter = isHunter;
      2 ( 0.00%)  }
      .           
      .           void Player::clearUserID()
      .           {
      .             id = "9998";
      .           }
      .           
      .           bool Player::isHunter() const
600,000 ( 0.37%)  {
600,000 ( 0.37%)      return hunter;
600,000 ( 0.37%)  }
      .           
      .           Allegiance Player::getAllegiance() const
      .           {
      .               return allegiance;
      .           }
      .           
      .           void Player::setAllegiance(const std::string& allegianceStr)
      .           {
-- line 80 ----------------------------------------
-- line 150 ----------------------------------------
      .           }
      .           
      .           void Player::setFaction(const std::string& faction)
      .           {
      .               this->faction = faction;
      .           }
      .           
      .           void Player::setUserID(char* newId)
     24 ( 0.00%)  {
      .             id = std::string(newId);
     22 ( 0.00%)  }
      .           
      .           std::string Player::getUserID() const
      .           {
      .               return id;
      .           }
      .           
      .           void Player::setCurrentMatchId(const std::string& matchId) {
      .               currentMatchId = matchId;
-- line 168 ----------------------------------------
-- line 183 ----------------------------------------
      .           std::string& Player::getCurrentOpponentId() {
      .               return currentOpponentId;
      .           }
      .           
      .           const std::string& Player::getCurrentOpponentId() const {
      .               return currentOpponentId;
      .           }
      .           
     24 ( 0.00%)  void Player::setOpponentMacAddress(const std::string& macAddress) {
      2 ( 0.00%)      opponentMacAddress = macAddress;
      2 ( 0.00%)      opponentMacValid = StringToMac(macAddress.c_str(), opponentMacBytes);
     18 ( 0.00%)  }
      .           
      .           void Player::setOpponentMacAddress(const uint8_t* macBytes) {
      .               memcpy(opponentMacBytes, macBytes, 6);
      .               opponentMacValid = true;
      .               opponentMacAddress = MacToString(macBytes);
      .           }
      .           
      .           std::string& Player::getOpponentMacAddress() {
      .               return opponentMacAddress;
      .           }
      .           
      .           const std::string& Player::getOpponentMacAddress() const {
      .               return opponentMacAddress;
      .           }
      .           
200,000 ( 0.12%)  const uint8_t* Player::getOpponentMacBytes() const {
200,000 ( 0.12%)      return opponentMacBytes;
200,000 ( 0.12%)  }
      .           
200,000 ( 0.12%)  bool Player::hasOpponentMac() const {
200,000 ( 0.12%)      return opponentMacValid;
200,000 ( 0.12%)  }
      .           
      .           unsigned long Player::getLastReactionTime() {
      .               return lastReactionTime;
      .           }
      .           
      .           unsigned long Player::getAverageReactionTime() {
      .               if(matchesPlayed == 0) {
      .                   return 0;
-- line 224 ----------------------------------------
-- line 260 ----------------------------------------
      .           
      .           void Player::incrementLosses() {
      .               losses++;
      .           }
      .           
      .           void Player::addReactionTime(unsigned long reactionTime) {
      .               lastReactionTime = reactionTime;
      .               totalReactionTime += reactionTime;
      8 ( 0.00%)  }
--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/c++/11/bits/stl_construct.h
--------------------------------------------------------------------------------
Ir               

-- line 111 ----------------------------------------
      .           #if __cplusplus >= 202002L && __has_builtin(__builtin_is_constant_evaluated)
      .                 if (__builtin_is_constant_evaluated())
      .           	{
      .           	  // Allow std::_Construct to be used in constant expressions.
      .           	  std::construct_at(__p, std::forward<_Args>(__args)...);
      .           	  return;
      .           	}
      .           #endif
200,000 ( 0.12%)        ::new((void*)__p) _Tp(std::forward<_Args>(__args)...);
18,800,000 (11.71%)  => /mnt/c/Users/Elli Furedy/projects/pdn/src/match.cpp:Match::Match(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (100,000x)
      .               }
      .           #else
      .             template<typename _T1, typename _T2>
      .               inline void
      .               _Construct(_T1* __p, const _T2& __value)
      .               {
      .                 // _GLIBCXX_RESOLVE_LIB_DEFECTS
      .                 // 402. wrong new expression in [some_]allocator::construct
-- line 127 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/include/c++/11/bits/basic_string.h
--------------------------------------------------------------------------------
Ir               

-- line 157 ----------------------------------------
      .                 // Use empty-base optimization: http://www.cantrip.org/emptyopt.html
      .                 struct _Alloc_hider : allocator_type // TODO check __is_final
      .                 {
      .           #if __cplusplus < 201103L
      .           	_Alloc_hider(pointer __dat, const _Alloc& __a = _Alloc())
      .           	: allocator_type(__a), _M_p(__dat) { }
      .           #else
      .           	_Alloc_hider(pointer __dat, const _Alloc& __a)
600,472 ( 0.37%)  	: allocator_type(__a), _M_p(__dat) { }
      .           
      .           	_Alloc_hider(pointer __dat, _Alloc&& __a = _Alloc())
      .           	: allocator_type(std::move(__a)), _M_p(__dat) { }
      .           #endif
      .           
      .           	pointer _M_p; // The actual data.
      .                 };
      .           
-- line 173 ----------------------------------------
-- line 179 ----------------------------------------
      .                 union
      .                 {
      .           	_CharT           _M_local_buf[_S_local_capacity + 1];
      .           	size_type        _M_allocated_capacity;
      .                 };
      .           
      .                 void
      .                 _M_data(pointer __p)
100,003 ( 0.06%)        { _M_dataplus._M_p = __p; }
      .           
      .                 void
      .                 _M_length(size_type __length)
300,483 ( 0.19%)        { _M_string_length = __length; }
      .           
      .                 pointer
      .                 _M_data() const
400,037 ( 0.25%)        { return _M_dataplus._M_p; }
      .           
      .                 pointer
      .                 _M_local_data()
      .                 {
      .           #if __cplusplus >= 201103L
    484 ( 0.00%)  	return std::pointer_traits<pointer>::pointer_to(*_M_local_buf);
      .           #else
      .           	return pointer(_M_local_buf);
      .           #endif
      .                 }
      .           
      .                 const_pointer
      .                 _M_local_data() const
      .                 {
      .           #if __cplusplus >= 201103L
     14 ( 0.00%)  	return std::pointer_traits<const_pointer>::pointer_to(*_M_local_buf);
      .           #else
      .           	return const_pointer(_M_local_buf);
      .           #endif
      .                 }
      .           
      .                 void
      .                 _M_capacity(size_type __capacity)
100,000 ( 0.06%)        { _M_allocated_capacity = __capacity; }
      .           
      .                 void
      .                 _M_set_length(size_type __n)
      .                 {
      .           	_M_length(__n);
      .           	traits_type::assign(_M_data()[__n], _CharT());
      2 ( 0.00%)        }
      .           
      .                 bool
      .                 _M_is_local() const
      .                 { return _M_data() == _M_local_data(); }
      .           
      .                 // Create & Destroy
      .                 pointer
      .                 _M_create(size_type&, size_type);
      .           
      .                 void
      .                 _M_dispose()
      .                 {
600,038 ( 0.37%)  	if (!_M_is_local())
      .           	  _M_destroy(_M_allocated_capacity);
      .                 }
      .           
      .                 void
      .                 _M_destroy(size_type __size) throw()
200,008 ( 0.12%)        { _Alloc_traits::deallocate(_M_get_allocator(), _M_data(), __size + 1); }
      .           
      .                 // _M_construct_aux is used to implement the 21.3.1 para 15 which
      .                 // requires special behaviour if _InIterator is an integral type
      .                 template<typename _InIterator>
      .                   void
      .                   _M_construct_aux(_InIterator __beg, _InIterator __end,
      .           			 std::__false_type)
      .           	{
-- line 253 ----------------------------------------
-- line 348 ----------------------------------------
      .           		|| less<const _CharT*>()(_M_data() + this->size(), __s));
      .                 }
      .           
      .                 // When __n = 1 way faster than the general multichar
      .                 // traits_type::copy/move/assign.
      .                 static void
      .                 _S_copy(_CharT* __d, const _CharT* __s, size_type __n)
      .                 {
    286 ( 0.00%)  	if (__n == 1)
      .           	  traits_type::assign(*__d, *__s);
      .           	else
      .           	  traits_type::copy(__d, __s, __n);
      .                 }
      .           
      .                 static void
      .                 _S_move(_CharT* __d, const _CharT* __s, size_type __n)
      .                 {
-- line 364 ----------------------------------------
-- line 525 ----------------------------------------
      .                  *  @param  __s  Source C string.
      .                  *  @param  __a  Allocator to use (default is default allocator).
      .                  */
      .           #if __cpp_deduction_guides && ! defined _GLIBCXX_DEFINING_STRING_INSTANTIATIONS
      .                 // _GLIBCXX_RESOLVE_LIB_DEFECTS
      .                 // 3076. basic_string CTAD ambiguity
      .                 template<typename = _RequireAllocator<_Alloc>>
      .           #endif
  4,600 ( 0.00%)        basic_string(const _CharT* __s, const _Alloc& __a = _Alloc())
      .                 : _M_dataplus(_M_local_data(), __a)
      .                 {
  1,710 ( 0.00%)  	const _CharT* __end = __s ? __s + traits_type::length(__s)
      .           	  // We just need a non-null pointer here to get an exception:
      .           	  : reinterpret_cast<const _CharT*>(__alignof__(_CharT));
      .           	_M_construct(__s, __end, random_access_iterator_tag());
  4,600 ( 0.00%)        }
      .           
      .                 /**
      .                  *  @brief  Construct string as multiple characters.
      .                  *  @param  __n  Number of characters.
      .                  *  @param  __c  Character to use.
      .                  *  @param  __a  Allocator to use (default is default allocator).
      .                  */
      .           #if __cpp_deduction_guides && ! defined _GLIBCXX_DEFINING_STRING_INSTANTIATIONS
-- line 548 ----------------------------------------
-- line 724 ----------------------------------------
      .           	    // Destroy existing storage before replacing allocator.
      .           	    _M_destroy(_M_allocated_capacity);
      .           	    _M_data(_M_local_data());
      .           	    _M_set_length(0);
      .           	  }
      .           	// Replace allocator if POCMA is true.
      .           	std::__alloc_on_move(_M_get_allocator(), __str._M_get_allocator());
      .           
      4 ( 0.00%)  	if (__str._M_is_local())
      .           	  {
      .           	    // We've always got room for a short string, just copy it
      .           	    // (unless this is a self-move, because that would violate the
      .           	    // char_traits::copy precondition that the ranges don't overlap).
      .           	    if (__builtin_expect(std::__addressof(__str) != this, true))
      .           	      {
      4 ( 0.00%)  		if (__str.size())
      .           		  this->_S_copy(_M_data(), __str._M_data(), __str.size());
      .           		_M_set_length(__str.size());
      .           	      }
      .           	  }
      .           	else if (_Alloc_traits::_S_propagate_on_move_assign()
      .           	    || _Alloc_traits::_S_always_equal()
      .           	    || _M_get_allocator() == __str._M_get_allocator())
      .           	  {
-- line 747 ----------------------------------------
-- line 913 ----------------------------------------
      .           #endif
      .           
      .               public:
      .                 // Capacity:
      .                 ///  Returns the number of characters in the string, not including any
      .                 ///  null-termination.
      .                 size_type
      .                 size() const _GLIBCXX_NOEXCEPT
      4 ( 0.00%)        { return _M_string_length; }
      .           
      .                 ///  Returns the number of characters in the string, not including any
      .                 ///  null-termination.
      .                 size_type
      .                 length() const _GLIBCXX_NOEXCEPT
      .                 { return _M_string_length; }
      .           
      .                 ///  Returns the size() of the largest possible %string.
-- line 929 ----------------------------------------
-- line 1379 ----------------------------------------
      .           		    _M_data(__ptr);
      .           		    _M_capacity(__len);
      .           		    _M_set_length(__len);
      .           		  }
      .           	      }
      .           	    std::__alloc_on_copy(_M_get_allocator(), __str._M_get_allocator());
      .           	  }
      .           #endif
      2 ( 0.00%)  	this->_M_assign(__str);
  1,695 ( 0.00%)  => ???:0x000000000010f460 (2x)
      .           	return *this;
      .                 }
      .           
      .           #if __cplusplus >= 201103L
      .                 /**
      .                  *  @brief  Set value to contents of another string.
      .                  *  @param  __str  Source string to use.
      .                  *  @return  Reference to this string.
-- line 1395 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: include/game/match-manager.hpp
--------------------------------------------------------------------------------
Ir               

-- line 14 ----------------------------------------
      .           #include "device/drivers/button.hpp"
      .           #include "game/match.hpp"
      .           #include "game/player.hpp"
      .           #include "wireless/quickdraw-wireless-manager.hpp"
      .           #include "device/drivers/storage-interface.hpp"
      .           
      .           // Preferences namespace and keys
      .           
     12 ( 0.00%)  struct ActiveDuelState {
      .               bool hasReceivedDrawResult = false;
      .               bool hasPressedButton = false;
      .               bool gracePeriodExpiredNoResult = false;
      .               unsigned long duelLocalStartTime = 0;
      .               unsigned long BUTTON_MASHER_PENALTY_MS = 75;
      .               int buttonMasherCount = 0;
      .               std::optional<Match> match;
      .           };
-- line 30 ----------------------------------------
-- line 74 ----------------------------------------
      .               bool getHasPressedButton();
      .               void setReceivedDrawResult();
      .               void setReceivedButtonPush();
      .           
      .               /**
      .                * Gets the current active match if any
      .                * @return Pointer to the active match, nullptr if none
      .                */
750,000 ( 0.47%)      Match* getCurrentMatch() { return activeDuelState.match ? &*activeDuelState.match : nullptr; }
      .           
      .               /**
      .                * Converts all stored matches to a JSON array string
      .                * @return JSON string containing all stored matches
      .                */
      .               std::string toJson();
      .           
      .               /**
-- line 90 ----------------------------------------

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  ./debug/./debug/snprintf_chk.c
  ./elf/../sysdeps/x86_64/dl-machine.h
  ./elf/./elf/dl-lookup.c
  ./libio/./libio/genops.c
  ./libio/./libio/iopadn.c
  ./libio/./libio/libioP.h
  ./libio/./libio/strops.c
  ./libio/./libio/vsnprintf.c
  ./malloc/./malloc/arena.c
  ./malloc/./malloc/malloc.c
  ./stdio-common/../libio/libioP.h
  ./stdio-common/./stdio-common/_itoa.c
  ./stdio-common/./stdio-common/printf-parse.h
  ./stdio-common/./stdio-common/vfprintf-internal.c
  ./string/../sysdeps/x86_64/multiarch/strchr-avx2.S
  ./string/../sysdeps/x86_64/multiarch/strcpy-avx2.S
  ./string/../sysdeps/x86_64/multiarch/strlen-avx2.S

--------------------------------------------------------------------------------
Ir                  
--------------------------------------------------------------------------------
55,641,613 (34.65%)  events annotated

